<!-- MarkdownTOC autolink="true" -->

- [作りたいもの](#%E4%BD%9C%E3%82%8A%E3%81%9F%E3%81%84%E3%82%82%E3%81%AE)
- [実装中](#%E5%AE%9F%E8%A3%85%E4%B8%AD)
- [GameObject.Find](#gameobjectfind)
- [Example Scene](#example-scene)
- [メッセージGUI](#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8gui)
    - [外観](#%E5%A4%96%E8%A6%B3)
    - [実装](#%E5%AE%9F%E8%A3%85)
- [蝶の動き](#%E8%9D%B6%E3%81%AE%E5%8B%95%E3%81%8D)

<!-- /MarkdownTOC -->

# 作りたいもの
手に蝶が乗ってひらひらする  
https://twitter.com/SIitherinn/status/983708984812167168  
これをGW開けまでに作る.  

# 実装中
1. 蝶をクリックすると説明が出る.  
1. 蝶がひらひら動く.  

# GameObject.Find
Hierarchyから引数と同じ名前のオブジェクトを取得する.  

    例
    GameObject messagepanel;
    messagepanel = GameObject.Find( "ActiveMessagePanel" )
    とすると、messagepanelにActiveMessagePanelのオブジェクトが参照され格納される.

# Example Scene
Grass and Flower pack 1のシーン  
これにオブジェクトを設置して作っている  

# メッセージGUI

##外観  
![messageUI](figure/messageUI.png "messageUI")  
階層構造はこんなかんじ  
![messageUI](figure/messageUIarchitecture.png "messageUI architecture")  

パラメータ:  

    Panel
    stretch-stretch
    Left 10, Top 200, Pos Z 0
    Right 10, Bottom 10

    Text
    stretch-stretch
    Left 10, Top 10, Pos Z 10
    Right 10, Bottom 10

    Image
    stretch-stretch
    Left 400, Top 95, Pos Z 0
    Right 10, Bottom 10
参考: https://gametukurikata.com/program/rpgmessage  

## 実装
ActiveMessagePanel.cs

    using UnityEngine;
    using System.Collections;
    public class ActiveMessagePanel : MonoBehaviour {
        //　MessageUIに設定されているMessageスクリプトを設定
        [SerializeField]
        private Message messageScript;
        private GameObject refObj;
        public string cubeTag="Cube";
        Ray ray;
        RaycastHit hit = new RaycastHit();
        // Update is called once per frame
        void Update () {
            if (Input.GetMouseButtonDown(0))
            {
                ray = Camera.main.ScreenPointToRay(Input.mousePosition);
                //マウスクリックした場所からRayを飛ばし、オブジェクトがあればtrue 
                if (Physics.Raycast(ray.origin, ray.direction, out hit, Mathf.Infinity))
                {
                    if(hit.collider.gameObject.CompareTag(cubeTag))
                    {
                        // cubeControlクラスにmessageScriptオブジェクトを渡して，定められたメッセージを表示する.
                        hit.collider.gameObject.GetComponent<CubeControl>().OnUserAction(messageScript);
                    }
                }
            }
        }
    }

CubeControl.cs

    using UnityEngine;
    using System.Collections;
    [RequireComponent(typeof(Rigidbody))]
    public class CubeControl : MonoBehaviour {
        private string message = "テストメッセージ\n"
        + "ここに種ごとの説明が入る予定\n";
        public void OnUserAction(Message messageScript)
        {
            messageScript.SetMessagePanel(message);
        }
    }


# 蝶の動き